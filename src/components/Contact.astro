---
// Número de WhatsApp (reemplaza con el número real)
const whatsappNumber = "5491112345678"; // Ejemplo: formato internacional sin el +
const whatsappMessage = "Hola! Me interesa obtener más información sobre GYM BOX.";
const whatsappLink = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(whatsappMessage)}`;

// Clave de acceso para Web3Forms
const web3formsAccessKey = "7ed836a7-266b-4f1c-b507-697bab218b47";
---

<section id="contacto" class="py-20 bg-black relative">
  <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
    <div class="text-center mb-16">
      <h2 class="text-4xl md:text-5xl font-anton text-yellow-400 mb-4">CONTACTO</h2>
      <p class="text-xl text-gray-300 max-w-5xl mx-auto font-lato font-light normal-case">
        ¿Tienes alguna pregunta? ¿Quieres probar una clase gratis? Contáctanos y te responderemos lo antes posible.
      </p>
    </div>

    <!-- Contenedor principal con borde amarillo -->
    <div class="relative border-2 border-yellow-400 bg-black rounded-lg overflow-hidden">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-0">
        
        <!-- Imagen de fondo (solo visible en desktop) -->
        <div class="hidden lg:block relative h-full">
          <img 
            src="/gym2.jpg" 
            alt="Entrenamiento intenso" 
            class="absolute inset-0 w-full h-full object-cover"
          />
          <div class="absolute inset-0 bg-gradient-to-r from-transparent to-black opacity-50"></div>
        </div>
        
        <!-- Formulario y texto -->
        <div class="p-8 md:p-12 lg:p-16">
          <div class="mb-10">
            <h3 class="text-4xl md:text-5xl font-anton text-white mb-2">COMENCEMOS EL</h3>
            <h3 class="text-4xl md:text-5xl font-anton text-yellow-400 mb-6">ENTRENAMIENTO YA</h3>
            <p class="text-gray-300 font-lato normal-case">
              Obtén un 50% de descuento en las primeras tres clases al inscribirte este mes en cualquier membresía
            </p>
          </div>
          
          <!-- Formulario con Web3Forms -->
          <form 
            id="contact-form" 
            action="https://api.web3forms.com/submit" 
            method="POST"
            class="space-y-6 font-lato"
          >
            <!-- Campo oculto con la clave de acceso de Web3Forms -->
            <input type="hidden" name="access_key" value={web3formsAccessKey} />
            
            <!-- Campo oculto para el asunto del correo -->
            <input type="hidden" name="subject" value="Nuevo mensaje de contacto - GYM KORPOS" />
            
            <!-- Campo oculto para el nombre del remitente en las notificaciones -->
            <input type="hidden" name="from_name" value="Korpos's Gym" />
            
            <!-- Campo oculto para la redirección después del envío (opcional) -->
            <input type="hidden" name="redirect" value="" />
            
            <!-- Campo oculto para capturar bots de spam -->
            <input type="checkbox" name="botcheck" class="hidden" style="display: none;" />
            
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
              <div>
                <input 
                  type="text" 
                  id="name" 
                  name="name" 
                  placeholder="Tu nombre..."
                  required 
                  class="w-full px-4 py-3 bg-zinc-800 border border-zinc-700 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-yellow-400"
                />
              </div>
              <div>
                <input 
                  type="tel" 
                  id="phone" 
                  name="phone" 
                  placeholder="Tu teléfono..."
                  required
                  class="w-full px-4 py-3 bg-zinc-800 border border-zinc-700 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-yellow-400"
                />
              </div>
            </div>
            <div>
              <input 
                type="email" 
                id="email" 
                name="email" 
                placeholder="Tu correo electrónico..."
                required 
                class="w-full px-4 py-3 bg-zinc-800 border border-zinc-700 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-yellow-400"
              />
            </div>
            <div>
              <textarea 
                id="message" 
                name="message" 
                rows="4" 
                placeholder="Tu mensaje..."
                required
                class="w-full px-4 py-3 bg-zinc-800 border border-zinc-700 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-yellow-400"
              ></textarea>
            </div>
            
            <!-- Mensaje de estado del formulario -->
            <div id="form-status" class="hidden"></div>
            
            <button 
              type="submit" 
              id="submit-button"
              class="w-full bg-yellow-400 text-black font-anton py-3 px-4 rounded-md hover:bg-yellow-500 transition-colors duration-200 text-xl"
            >
              ÚNETE AHORA
            </button>
          </form>
        </div>
      </div>
    </div>
    
    <!-- Información de contacto y mapa -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mt-16">
      <!-- Información de contacto -->
      <div class="bg-zinc-900 p-8 rounded-lg shadow-lg">
        <h3 class="text-2xl font-anton text-white mb-6">INFORMACIÓN DE CONTACTO</h3>
        <div class="space-y-6 font-lato">
          <div class="flex items-start">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-400 mr-3 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
            <div>
              <h4 class="text-white font-medium">Dirección</h4>
              <p class="text-gray-300 normal-case">Necochea 250, Pseao de la ciudad, Barrio Centro</p>
            </div>
          </div>
          <div class="flex items-start">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-400 mr-3 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
            </svg>
            <div>
              <h4 class="text-white font-medium">Teléfono</h4>
              <p class="text-gray-300 normal-case">+54 388 4076431</p>
            </div>
          </div>
          <div class="flex items-start">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-400 mr-3 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
            <div>
              <h4 class="text-white font-medium">Email</h4>
              <p class="text-gray-300 normal-case">info@korpos.com</p>
            </div>
          </div>
          <div class="flex items-start">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-400 mr-3 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <div>
              <h4 class="text-white font-medium">Horario de atención</h4>
              <p class="text-gray-300 normal-case">Lunes a Viernes: 7:30 - 22:00</p>
              <p class="text-gray-300 normal-case">Sábado: 16:00 - 18:15</p>
              <p class="text-gray-300 normal-case">Domingo: Cerrado</p>
            </div>
          </div>
          
          <!-- Botón de WhatsApp -->
          <a 
            href={whatsappLink}
            target="_blank"
            rel="noopener noreferrer"
            class="mt-6 inline-flex items-center justify-center w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-md transition-colors duration-200 font-anton"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
              <path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/>
            </svg>
            CONTÁCTANOS POR WHATSAPP
          </a>
        </div>
      </div>
      
      <!-- Mapa de Google -->
      <div class="bg-zinc-900 p-8 rounded-lg shadow-lg">
        <h3 class="text-2xl font-anton text-white mb-6">ENCUÉNTRANOS</h3>
        <div class="aspect-video bg-zinc-800 rounded-lg overflow-hidden">
          <!-- Iframe de Google Maps proporcionado por el usuario -->
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d3639.582586252536!2d-65.3020438242463!3d-24.186367597408427!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1ses!2sar!4v1747180898690!5m2!1ses!2sar" 
            width="100%" 
            height="100%" 
            style="border:0;" 
            allowfullscreen="" 
            loading="lazy" 
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        </div>
        
        <!-- Enlace para ver en Google Maps -->
        <div class="mt-4 text-center">
          <a 
            href="https://maps.app.goo.gl/uktdkstSzdvPGuzH7" 
            target="_blank" 
            rel="noopener noreferrer" 
            class="inline-flex items-center text-yellow-400 hover:text-yellow-300 transition-colors duration-200 font-lato"
          >
            Ver ubicación completa en Google Maps
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
            </svg>
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Manejo del formulario con Web3Forms
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contact-form') as HTMLFormElement;
    const statusDiv = document.getElementById('form-status') as HTMLDivElement;
    const submitButton = document.getElementById('submit-button') as HTMLButtonElement;
    
    if (form && statusDiv && submitButton) {
      form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Cambiar el texto del botón y deshabilitarlo durante el envío
        const originalButtonText = submitButton.innerText;
        submitButton.innerText = 'ENVIANDO...';
        submitButton.disabled = true;
        
        try {
          // Enviar el formulario usando fetch
          const formData = new FormData(form);
          const response = await fetch(form.action, {
            method: 'POST',
            body: formData,
            headers: {
              'Accept': 'application/json'
            }
          });
          
          const data = await response.json();
          
          if (response.status === 200) {
            // Éxito
            statusDiv.className = 'bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4';
            statusDiv.innerHTML = '<strong>¡Gracias!</strong> Tu mensaje ha sido enviado correctamente. Te contactaremos pronto.';
            form.reset();
          } else {
            // Error
            throw new Error(data.message || 'Algo salió mal. Por favor, intenta de nuevo.');
          }
        } catch (error) {
          // Error
          statusDiv.className = 'bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4';
          statusDiv.innerHTML = `<strong>Error:</strong> ${error instanceof Error ? error.message : 'Algo salió mal. Por favor, intenta de nuevo.'}`;
        } finally {
          // Restaurar el botón y mostrar el mensaje de estado
          submitButton.innerText = originalButtonText;
          submitButton.disabled = false;
          statusDiv.classList.remove('hidden');
          
          // Desplazarse hasta el mensaje de estado
          statusDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          
          // Ocultar el mensaje después de 5 segundos si fue exitoso
          if (statusDiv.classList.contains('bg-green-100')) {
            setTimeout(() => {
              statusDiv.classList.add('hidden');
            }, 5000);
          }
        }
      });
    }
  });
</script>

<style>
  /* Estilo para el borde del formulario */
  @media (min-width: 1024px) {
    .border-2.border-yellow-400 {
      clip-path: polygon(0 0, 100% 0, 95% 100%, 5% 100%);
    }
  }
</style>
